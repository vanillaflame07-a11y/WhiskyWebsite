from flask import Flask, jsonify, send_from_directory
from flask_cors import CORS

app = Flask(__name__, static_folder="static")
CORS(app)

# -------------------------------
# ìœ„ìŠ¤í‚¤ ë°ì´í„°
# -------------------------------
whiskies_data = [
    {
        "name": "ê¸€ë Œë¦¬ë²³ 12ë…„",
        "image": "https://placehold.co/400x400/FFD89C/6B4A00?text=Glenlivet",
        "flavor": ["ê³¼ì¼", "í”Œë¡œëŸ´"],
        "description": "ê°€ë³ê³  ì‹ ì„ í•œ ê³¼ì¼ í–¥ì´ íŠ¹ì§•ì´ë©°, ë¶€ë“œëŸ¬ìš´ ëª© ë„˜ê¹€ìœ¼ë¡œ ìœ„ìŠ¤í‚¤ ì…ë¬¸ìì—ê²Œ ì‚¬ë‘ë°›ëŠ” ì‹±ê¸€ëª°íŠ¸ì…ë‹ˆë‹¤."
    },
    {
        "name": "ê¸€ë Œí”¼ë”• 12ë…„",
        "image": "https://placehold.co/400x400/D4F0BA/3C542E?text=Glenfiddich",
        "flavor": ["ë°°", "ì‚¬ê³¼", "ì˜¤í¬"],
        "description": "ì‹±ê¸€ëª°íŠ¸ì˜ ëŒ€ëª…ì‚¬ë¡œ ë¶ˆë¦¬ë©°, ì‹ ì„ í•œ ê³¼ì¼ê³¼ ë¯¸ë¬˜í•œ ì˜¤í¬ í–¥ì´ ì¡°í™”ë¡œìš´ ë¶€ë“œëŸ¬ìš´ ìœ„ìŠ¤í‚¤ì…ë‹ˆë‹¤."
    },
    {
        "name": "ë°œë² ë‹ˆ ë”ë¸”ìš°ë“œ 12ë…„",
        "image": "https://placehold.co/400x400/E3C293/5F4628?text=Balvenie",
        "flavor": ["ë°”ë‹ë¼", "ê¿€", "ì…°ë¦¬"],
        "description": "ë‘ ì¢…ë¥˜ì˜ ì˜¤í¬í†µì—ì„œ ìˆ™ì„±í•˜ì—¬ ë¶€ë“œëŸ¬ìš´ ë°”ë‹ë¼ì™€ ë‹¬ì½¤í•œ ê¿€, ì•½ê°„ì˜ ì…°ë¦¬ í–¥ì´ ì–´ìš°ëŸ¬ì§€ëŠ” ë³µí•©ì ì¸ ë§›ì´ ë§¤ë ¥ì ì…ë‹ˆë‹¤."
    },
    {
        "name": "ë§¥ìº˜ë€ 12ë…„",
        "image": "https://placehold.co/400x400/A05C5C/301A1A?text=Macallan",
        "flavor": ["ê±´ê³¼ì¼", "ê²¬ê³¼ë¥˜", "ì´ˆì½œë¦¿"],
        "description": "ê°•ë ¬í•œ ì…°ë¦¬ í’ë¯¸ê°€ íŠ¹ì§•ì´ë©°, í’ë¶€í•œ ê±´ê³¼ì¼ê³¼ ì´ˆì½œë¦¿ í–¥ì´ ì§„í•˜ê³  ê¹Šì€ ì¸ìƒì„ ë‚¨ê¸°ëŠ” ìœ„ìŠ¤í‚¤ì…ë‹ˆë‹¤."
    },
    {
        "name": "íƒˆë¦¬ìŠ¤ì»¤ 10ë…„",
        "image": "https://placehold.co/400x400/87B4C6/2A3B43?text=Talisker",
        "flavor": ["ë°”ë‹·ë°”ëŒ", "í”¼íŠ¸", "ìŠ¤ëª¨í‚¤"],
        "description": "ìŠ¤ì¹´ì´ ì„¬ì˜ ê±°ì¹œ ìì—°ì„ ë‹®ì€ ê°•ë ¬í•œ ë°”ë‹·ë°”ëŒê³¼ í›„ì¶” í–¥, ì€ì€í•œ ìŠ¤ëª¨í‚¤í•¨ì´ ê³µì¡´í•˜ëŠ” ê°œì„± ìˆëŠ” ìœ„ìŠ¤í‚¤ì…ë‹ˆë‹¤."
    },
    {
        "name": "ë¼í”„ë¡œìµ 10ë…„",
        "image": "https://placehold.co/400x400/808080/FFFFFF?text=Laphroaig",
        "flavor": ["í”¼íŠ¸", "ìŠ¤ëª¨í‚¤", "ìš”ì˜¤ë“œ"],
        "description": "ì„¸ìƒì—ì„œ ê°€ì¥ ê°•í•œ í”¼íŠ¸ ìœ„ìŠ¤í‚¤ ì¤‘ í•˜ë‚˜ë¡œ, ë³‘ì› ì†Œë…ì•½ ê°™ì€ ë…íŠ¹í•˜ê³  ê°•ë ¬í•œ í–¥ì´ ë§¤ë‹ˆì•„ì¸µì„ í˜•ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤."
    },
    {
        "name": "ì•¼ë§ˆìí‚¤ 12ë…„",
        "image": "https://placehold.co/400x400/F0E0D0/544C40?text=Yamazaki",
        "flavor": ["ê³¼ì¼", "ë°”ë‹ë¼", "ì˜¤í¬"],
        "description": "ì¼ë³¸ ìœ„ìŠ¤í‚¤ì˜ ì„ êµ¬ìë¡œ ë¶€ë“œëŸ½ê³  ì„¬ì„¸í•œ ë§›ì´ íŠ¹ì§•ì…ë‹ˆë‹¤. ê³¼ì¼ê³¼ ì˜¤í¬ì˜ í’ë¯¸ê°€ ì¡°í™”ë¡­ê³  ê¹”ë”í•©ë‹ˆë‹¤."
    }
]

# -------------------------------
# í…ŒìŠ¤íŠ¸ ì§ˆë¬¸/ì ìˆ˜/íƒ€ì… ë°ì´í„°
# -------------------------------
questions = [
    {
        "id": "q1",
        "text": "Q1. ì§€ê¸ˆ ë””ì €íŠ¸ë¥¼ ê³ ë¥¸ë‹¤ë©´?",
        "options": [
            {"value": "fruit", "label": "A. ê³¼ì¼ íƒ€ë¥´íŠ¸ ğŸ"},
            {"value": "choco", "label": "B. ì´ˆì½œë¦¿ ì¼€ì´í¬ ğŸ«"}
        ]
    },
    {
        "id": "q2",
        "text": "Q2. ì—¬í–‰ì§€ì—ì„œ ë” ëŒë¦¬ëŠ” í’ê²½ì€?",
        "options": [
            {"value": "sea", "label": "A. ë°”ë‹·ë°”ëŒ ğŸŒŠ"},
            {"value": "forest", "label": "B. ìˆ²ì†ì˜ ë‚˜ë¬´ í–¥ê¸° ğŸŒ²"}
        ]
    },
    {
        "id": "q3",
        "text": "Q3. ì €ë…ì— ë¶ˆë©í•  ë•Œ ë” ì¢‹ì€ ê±´?",
        "options": [
            {"value": "campfire", "label": "A. ì€ì€í•œ ëª¨ë‹¥ë¶ˆ í–¥ ğŸ”¥"},
            {"value": "bbq", "label": "B. ê°•ë ¬í•œ ë°”ë¹„í ì—°ê¸° ğŸ–"}
        ]
    },
    {
        "id": "q4",
        "text": "Q4. ì¹´í˜ì— ê°€ë©´ ë” ë•¡ê¸°ëŠ” ê±´?",
        "options": [
            {"value": "latte", "label": "A. ì¹´ë¼ë©œ ë§ˆí‚¤ì•„í† /ë°”ë‹ë¼ ë¼ë–¼ â˜•"},
            {"value": "espresso", "label": "B. ì§„í•œ ì—ìŠ¤í”„ë ˆì†Œ â˜•"}
        ]
    },
    {
        "id": "q5",
        "text": "Q5. ìˆ  ë§ˆì‹  ë’¤ ì–´ë–¤ ëŠë‚Œì´ ë” ì¢‹ì•„ìš”?",
        "options": [
            {"value": "light", "label": "A. ì‚°ëœ»í•˜ê²Œ ì‚¬ë¼ì§€ëŠ” ì—¬ìš´ ğŸŒ¬ï¸"},
            {"value": "heavy", "label": "B. ì§„í•˜ê²Œ ì˜¤ë˜ ë‚¨ëŠ” ì—¬ìš´ ğŸ•°ï¸"}
        ]
    },
    {
        "id": "q6",
        "text": "Q6. íŒŒí‹°ì—ì„œ ë‚´ê°€ ê³ ë¥¼ ì•ˆì£¼ëŠ”?",
        "options": [
            {"value": "popcorn", "label": "A. êµ¬ìš´ ì˜¥ìˆ˜ìˆ˜, ìºëŸ¬ë©œ íŒì½˜ ğŸ¿"},
            {"value": "nuts", "label": "B. êµ¬ìš´ ê²¬ê³¼ë¥˜, ì¹˜ì¦ˆ ğŸ§€"}
        ]
    }
]

scores = {
    "fruit": {"fruit": 2, "japan": 1},
    "choco": {"dried": 2, "nutty": 1},
    "sea": {"sea": 2, "smoky_light": 1},
    "forest": {"vanilla": 2, "spicy": 1},
    "campfire": {"smoky_light": 2, "vanilla": 1},
    "bbq": {"smoky_heavy": 3},
    "latte": {"vanilla": 2, "bourbon": 1},
    "espresso": {"nutty": 2, "spicy": 1},
    "light": {"fruit": 2, "japan": 1},
    "heavy": {"dried": 2, "smoky_heavy": 1},
    "popcorn": {"bourbon": 2, "vanilla": 1},
    "nuts": {"nutty": 2, "spicy": 1}
}

whisky_types = {
    "fruit": "ê°€ë³ê³  ë‹¬ì½¤í•œ ê³¼ì¼ íƒ€ì… (ê¸€ë Œë¦¬ë²³ 12, ê¸€ë Œí”¼ë”• 12 ë“±)",
    "vanilla": "ë¶€ë“œëŸ¬ìš´ ë°”ë‹ë¼Â·ê¿€ íƒ€ì… (ë°œë² ë‹ˆ ë”ë¸”ìš°ë“œ, ì•„ë²¨ë¼ì›Œ 12 ë“±)",
    "nutty": "ê³ ì†ŒÂ·ê²¬ê³¼Â·êµ¬ìš´ ë¹µ íƒ€ì… (ê¸€ë Œë“œë¡œë‚™ 12, ë§¥ìº˜ë€ 12 ë“±)",
    "spicy": "ìŠ¤íŒŒì´ì‹œÂ·ë”°ëœ»í•œ íƒ€ì… (ê¸€ë Œë“œë¡œë‚™ 15, ë§¥ìº˜ë€ ì…°ë¦¬ ì˜¤í¬ ë“±)",
    "dried": "ì§„í•œ ê³¼ì¼ì¼Â·ê±´ê³¼ì¼ íƒ€ì… (ê¸€ë Œë“œë¡œë‚™ 18, ì•„ë²¨ë¼ì›Œ ì•„ë¶€ë‚˜í ë“±)",
    "sea": "ë°”ë‹·ë°”ëŒÂ·ì§­ì§¤í•œ íƒ€ì… (íƒˆë¦¬ìŠ¤ì»¤ 10, ì˜¬ë“œ í’€íŠ¸ë‹ˆ ë“±)",
    "smoky_light": "ì€ì€í•œ ìŠ¤ëª¨í‚¤ íƒ€ì… (í•˜ì´ëœë“œ íŒŒí¬ 12, ë³´ëª¨ì–´ 12 ë“±)",
    "smoky_heavy": "ê°•ë ¬í•œ ìŠ¤ëª¨í‚¤/í”¼íŠ¸ íƒ€ì… (ë¼í”„ë¡œìµ 10, ë¼ê°€ë¶ˆë¦° 16, ì•„ë“œë²¡ 10 ë“±)",
    "bourbon": "ë¯¸êµ­ ë²„ë²ˆ íƒ€ì… (ë©”ì´ì»¤ìŠ¤ ë§ˆí¬, ë²„íŒ”ë¡œ íŠ¸ë ˆì´ìŠ¤ ë“±)",
    "japan": "ì¼ë³¸ ìœ„ìŠ¤í‚¤ íƒ€ì… (ì•¼ë§ˆìí‚¤ 12, í•˜ì¿ ìŠˆ ë“±)"
}

# -------------------------------
# API ì—”ë“œí¬ì¸íŠ¸
# -------------------------------
@app.route("/api/whiskies")
def get_whiskies():
    return jsonify(whiskies_data)

@app.route("/api/questions")
def get_questions():
    return jsonify(questions)

@app.route("/api/scores")
def get_scores():
    return jsonify(scores)

@app.route("/api/whiskytypes")
def get_whiskytypes():
    return jsonify(whisky_types)

# -------------------------------
# ê¸°ë³¸ ë£¨íŠ¸ì—ì„œ index.html ì œê³µ
# -------------------------------
@app.route("/")
def serve_index():
    return send_from_directory(app.static_folder, "index.html")

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
